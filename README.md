# JSON to XMind 转换插件

**作者:** chyax  
**版本:** 0.2.1  
**类型:** Dify 工具插件

## 功能介绍

将任意 JSON 数据转换为 XMind 思维导图，支持丰富的格式化和元数据标记。插件自动生成可直接下载的 .xmind 文件，无需额外处理。

### 核心特性

- ✅ **智能数据支持** - 支持 JSON 字符串、对象、数组或任意数据类型
- ✅ **完整结构转换** - 处理任意复杂的嵌套数据结构
- ✅ **丰富元数据** - 支持优先级、标签、备注、标记等多种属性
- ✅ **直接下载** - 一键获取标准 .xmind 文件，可直接在 XMind 软件中打开
- ✅ **灵活配置** - 可自定义根节点标题、最大深度等参数

## 参数说明

| 参数名 | 类型 | 必填 | 默认值 | 说明 |
|--------|------|------|--------|------|
| `json_data` | any | ✅ | - | 要转换的数据（支持多种类型） |
| `root_title` | string | ❌ | "思维导图" | 根节点标题 |
| `max_depth` | number | ❌ | 10 | 最大转换深度 (1-20) |

## 使用示例

### 1. 简单项目管理

**输入：**
```json
{
  "产品开发": {
    "前端开发": ["页面设计", "组件开发", "用户测试"],
    "后端开发": ["API设计", "数据库", "服务部署"],
    "项目管理": ["需求分析", "进度跟踪", "质量保证"]
  }
}
```

**生成思维导图结构：**
```
产品开发
├── 前端开发
│   ├── 页面设计
│   ├── 组件开发
│   └── 用户测试
├── 后端开发
│   ├── API设计
│   ├── 数据库
│   └── 服务部署
└── 项目管理
    ├── 需求分析
    ├── 进度跟踪
    └── 质量保证
```

### 2. 学习计划（带优先级）

**输入：**
```json
{
  "_priority": 1,
  "_label": "2024年学习计划",
  "技术学习": {
    "_star": "red",
    "_priority": 1,
    "编程语言": {
      "_flag": "green",
      "Python": {
        "_priority": 1,
        "_task": "half",
        "基础语法": ["变量", "函数", "类"],
        "进阶内容": ["异步编程", "装饰器", "生成器"]
      },
      "JavaScript": {
        "_priority": 2,
        "前端框架": ["React", "Vue", "Angular"],
        "后端技术": ["Node.js", "Express"]
      }
    },
    "数据科学": {
      "_priority": 2,
      "_emotion": "smile",
      "机器学习": ["监督学习", "无监督学习"],
      "数据分析": ["Pandas", "NumPy", "Matplotlib"]
    }
  },
  "软技能": {
    "_priority": 3,
    "沟通能力": ["演讲", "写作", "团队协作"],
    "项目管理": ["敏捷开发", "时间管理"]
  }
}
```

### 3. 公司组织架构

**输入：**
```json
{
  "_label": "科技公司组织架构",
  "_note": "2024年Q1组织结构",
  "科技公司": {
    "_star": "blue",
    "技术部门": {
      "_priority": 1,
      "_flag": "red",
      "前端团队": {
        "_symbol": "right",
        "团队成员": ["张三(Leader)", "李四", "王五"],
        "技术栈": ["React", "TypeScript", "Webpack"]
      },
      "后端团队": {
        "_symbol": "right",
        "团队成员": ["赵六(Leader)", "钱七", "孙八"],
        "技术栈": ["Java", "Spring Boot", "MySQL"]
      },
      "运维团队": {
        "_task": "quarter",
        "团队成员": ["周九(Leader)", "吴十"],
        "职责": ["服务器管理", "CI/CD", "监控告警"]
      }
    },
    "产品部门": {
      "_priority": 2,
      "_emotion": "smile",
      "产品经理": ["Alice", "Bob"],
      "UI设计师": ["Carol", "Dave"],
      "职责": ["需求分析", "原型设计", "用户体验"]
    },
    "市场部门": {
      "_priority": 3,
      "_arrow": "up",
      "市场推广": ["品牌宣传", "广告投放", "社交媒体"],
      "销售团队": ["客户开发", "商务谈判", "合同管理"]
    }
  }
}
```

### 4. 知识体系整理

**输入：**
```json
{
  "_label": "人工智能知识体系",
  "人工智能": {
    "_star": "yellow",
    "_priority": 1,
    "机器学习": {
      "_flag": "blue",
      "监督学习": {
        "_task": "done",
        "分类算法": ["逻辑回归", "决策树", "随机森林", "SVM"],
        "回归算法": ["线性回归", "多项式回归", "岭回归"]
      },
      "无监督学习": {
        "_task": "half",
        "聚类": ["K-means", "层次聚类", "DBSCAN"],
        "降维": ["PCA", "t-SNE", "UMAP"]
      },
      "强化学习": {
        "_task": "start",
        "_note": "待深入学习",
        "基础概念": ["智能体", "环境", "奖励", "策略"],
        "算法": ["Q-Learning", "Policy Gradient", "Actor-Critic"]
      }
    },
    "深度学习": {
      "_flag": "green",
      "_priority": 1,
      "神经网络": {
        "_symbol": "plus",
        "基础网络": ["感知机", "多层感知机", "反向传播"],
        "深度网络": ["CNN", "RNN", "LSTM", "Transformer"]
      },
      "应用领域": {
        "_emotion": "surprise",
        "计算机视觉": ["图像分类", "目标检测", "语义分割"],
        "自然语言处理": ["文本分类", "机器翻译", "问答系统"]
      }
    },
    "工具框架": {
      "_priority": 2,
      "_arrow": "right",
      "Python库": ["NumPy", "Pandas", "Scikit-learn", "Matplotlib"],
      "深度学习框架": ["TensorFlow", "PyTorch", "Keras"],
      "云平台": ["AWS", "Google Cloud", "Azure"]
    }
  }
}
```

### 5. 会议纪要整理

**输入：**
```json
{
  "_label": "项目启动会议纪要",
  "_note": "2024-09-03 产品规划会议",
  "_url": "https://company.com/meetings/20240903",
  "会议内容": {
    "_star": "orange",
    "项目背景": {
      "_priority": 1,
      "_task": "done",
      "市场需求": ["用户增长", "竞争分析", "技术趋势"],
      "业务目标": ["提升用户体验", "降低运营成本", "扩大市场份额"]
    },
    "技术方案": {
      "_priority": 1,
      "_flag": "yellow",
      "架构设计": {
        "_symbol": "question",
        "_note": "需要进一步讨论",
        "前端技术": ["React 18", "TypeScript", "Vite"],
        "后端技术": ["Node.js", "PostgreSQL", "Redis"]
      },
      "开发计划": {
        "_task": "quarter",
        "第一阶段": ["基础架构", "用户模块", "核心功能"],
        "第二阶段": ["高级功能", "性能优化", "测试部署"]
      }
    },
    "风险评估": {
      "_priority": 2,
      "_emotion": "boring",
      "_folded": true,
      "技术风险": ["新技术学习成本", "性能瓶颈", "兼容性问题"],
      "项目风险": ["时间延期", "资源不足", "需求变更"]
    },
    "行动项": {
      "_arrow": "down",
      "_task": "start",
      "技术团队": ["架构方案确认 @张三", "技术选型调研 @李四"],
      "产品团队": ["需求文档完善 @王五", "原型设计 @赵六"],
      "项目管理": ["时间计划制定 @钱七", "资源配置 @孙八"]
    }
  }
}
```

## 支持的元数据标记

使用下划线 `_` 前缀来定义节点的特殊属性：

### 基础属性
- `_priority`: 优先级标记 (1-6)
- `_label`: 节点描述文字 
- `_note`: 详细备注信息

### 视觉标记  
- `_star`: 星标颜色 (`red`, `orange`, `yellow`, `blue`, `green`, `purple`)
- `_flag`: 旗帜颜色 (同上)
- `_task`: 任务进度 (`start`, `quarter`, `half`, `3quar`, `done`)
- `_emotion`: 表情符号 (`smile`, `laugh`, `angry`, `cry`, `surprise`, `boring`)
- `_symbol`: 符号标记 (`plus`, `minus`, `question`, `right`, `wrong`)
- `_arrow`: 箭头方向 (`up`, `down`, `left`, `right`)

### 功能属性
- `_url`: 网页链接
- `_file`: 文件链接  
- `_topic`: 主题内部链接
- `_folded`: 折叠状态 (`true`/`false`)
- `_position`: 自定义位置 `[x, y]`

## Dify 工作流集成

```yaml
# 工作流配置
steps:
  - name: json_to_xmind
    type: tool
    tool: json2xmind
    parameters:
      json_data: "{{input.json_data}}"
      root_title: "{{input.title}}"
      max_depth: 10
```

**集成优势：**
- 🎯 自动生成可直接下载的 XMind 文件
- 🔧 智能处理多种输入数据类型
- 📥 用户一键下载，无需额外处理
- ⚡ 完全兼容 Dify 工作流语法

---

通过这个插件，您可以轻松将任何结构化数据转换为专业的思维导图，大大提升信息整理和可视化的效率！